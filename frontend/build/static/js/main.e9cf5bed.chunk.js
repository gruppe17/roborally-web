(this.webpackJsonproborally_frontend=this.webpackJsonproborally_frontend||[]).push([[0],{14:function(e,t,n){e.exports={blackSpace:"SpaceComponent_blackSpace__3llIS",whiteSpace:"SpaceComponent_whiteSpace__bX3a4",redPlayer:"SpaceComponent_redPlayer__3EqEe",greenPlayer:"SpaceComponent_greenPlayer__3hY7u",yellowPlayer:"SpaceComponent_yellowPlayer__3FEQb",bluePlayer:"SpaceComponent_bluePlayer__cGlRa"}},15:function(e,t,n){e.exports={game:"App_game__2kNJg",board:"App_board__LlZco",centered:"App_centered__fWv3C",container:"App_container__MvJio",shadowed:"App_shadowed__2bbZL"}},26:function(e,t,n){e.exports={container:"BoardComponent_container__27ZJP"}},5:function(e,t,n){e.exports={navbar:"NavBarComponent_navbar__2qlgb","nav-link-row":"NavBarComponent_nav-link-row__NBUxX","nav-link-text":"NavBarComponent_nav-link-text__xrWTV","nav-icon":"NavBarComponent_nav-icon__3Dtl-","nav-title":"NavBarComponent_nav-title__2J7Rn",btn:"NavBarComponent_btn__1jrQY",active:"NavBarComponent_active__368cP"}},53:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(25),o=n.n(c),s=n(3),i=n.n(s),l=n(6),u=Object(a.createContext)({loaded:!1,board:{playerDtos:[],spaceDtos:[],boardId:-1,boardName:"",currentPlayerDto:void 0,height:0,width:0},setCurrentPlayerOnSpace:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),switchCurrentPlayer:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),b=n(14),d=n.n(b),p=n(0),j=function(e){var t=e.space,n=Object(a.useContext)(u),r=n.board,c=n.setCurrentPlayerOnSpace,o=n.switchCurrentPlayer,s=Object(a.useMemo)((function(){return(t.x+t.y)%2===0?"white":"black"}),[t]),b=Object(a.useCallback)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.playerId){e.next=4;break}return e.next=3,c(t);case 3:o();case 4:case"end":return e.stop()}}),e)}))),[c,t,o]),j=Object(a.useMemo)((function(){var e=r.playerDtos.find((function(e){return e.playerId===t.playerId}));if(e)return e.playerColor}),[r.playerDtos,t.playerId]);return Object(p.jsx)("div",{className:d.a[s+"Space"],onClick:b,children:t.playerId&&j&&Object(p.jsx)("div",{className:d.a[j+"Player"]})})},h=n(26),v=n.n(h),_=function(){var e=Object(a.useContext)(u),t=e.board,n=e.loaded;return Object(p.jsx)("div",{className:v.a.container,children:n?t.spaceDtos.map((function(e,t){return Object(p.jsx)("div",{children:e.map((function(e,t){return Object(p.jsx)(j,{space:e},"space"+t)}))},"spaceArray"+t)})):Object(p.jsx)("h1",{children:"loading..."})})},O=n(10),m=n(7),y=n.n(m);var f=function(e){return Object(O.a)(e),Object(p.jsxs)("div",{className:y.a.menu,children:[Object(p.jsxs)("div",{className:y.a["button-row"],children:[Object(p.jsx)("button",{className:y.a.btn,children:"New game"}),Object(p.jsx)("button",{className:y.a.btn,children:"Games"}),Object(p.jsx)("button",{className:y.a.btn,children:"Players"})]}),Object(p.jsxs)("div",{className:y.a["menu-content"],children:["Each button will have different content here. The white button is the active menu. ",Object(p.jsx)("br",{})," When the game is active this might show your program register and cards"]})]})},x=n(5),w=n.n(x);function C(e){return Object(O.a)(e),Object(p.jsxs)("div",{className:w.a.navbar,children:[Object(p.jsx)("div",{className:w.a["nav-title"],children:"Roborally"}),Object(p.jsxs)("a",{href:"#",className:w.a["nav-link-row"],children:[Object(p.jsx)("div",{className:w.a["nav-icon"],children:"\u25b6\ufe0f"}),Object(p.jsx)("div",{className:w.a["nav-link-text"],children:"Play"})]}),Object(p.jsxs)("a",{href:"#",className:w.a["nav-link-row"],children:[Object(p.jsx)("div",{className:w.a["nav-icon"],children:"\u2754"}),Object(p.jsx)("div",{className:w.a["nav-link-text"],children:"Help"})]})]})}var N=n(16),g=n(9),k=n(4),P=n(27),S=n(28),I=n(12),D=n.n(I),B=function(){function e(){Object(P.a)(this,e),this.BACKEND_URL="http://localhost:8080"}return Object(S.a)(e,[{key:"getBoard",value:function(e){return D.a.get("".concat(this.BACKEND_URL,"/board/").concat(e)).then((function(e){return e.data}))}},{key:"moveCurrentPlayer",value:function(e,t){return D.a.put("".concat(this.BACKEND_URL,"/board/").concat(e,"/move"),t)}},{key:"switchPlayer",value:function(e){return D.a.put("".concat(this.BACKEND_URL,"/board/").concat(e,"/switchplayer"))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();B.instance=void 0;var E=B.getInstance(),A=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(k.a)(n,2),c=r[0],o=r[1];Object(a.useEffect)((function(){E.getBoard(1).then((function(e){I(e.spaceDtos),j(e.playerDtos),M(e.width),J(e.height),T(e.boardId),G(e.boardName),e.currentPlayerDto&&(w(e.currentPlayerDto),e.playerDtos.forEach((function(t,n){var a;t.playerId===(null===(a=e.currentPlayerDto)||void 0===a?void 0:a.playerId)&&m(n)}))),o(!0)})).catch((function(){console.error("Error while fetching board from backend")}))}),[]);var s=Object(a.useState)([]),b=Object(k.a)(s,2),d=b[0],j=b[1],h=Object(a.useMemo)((function(){return d.length}),[d]),v=Object(a.useState)(0),_=Object(k.a)(v,2),O=_[0],m=_[1],y=Object(a.useState)({playerId:-1,playerColor:"red",boardId:-1,playerName:""}),f=Object(k.a)(y,2),x=f[0],w=f[1],C=Object(a.useState)([]),P=Object(k.a)(C,2),S=P[0],I=P[1],D=Object(a.useState)(0),B=Object(k.a)(D,2),A=B[0],M=B[1],L=Object(a.useState)(0),R=Object(k.a)(L,2),F=R[0],J=R[1],U=Object(a.useState)(0),K=Object(k.a)(U,2),Q=K[0],T=K[1],W=Object(a.useState)("hi"),Z=Object(k.a)(W,2),q=Z[0],G=Z[1],X=Object(a.useCallback)(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.playerId){e.next=3;break}return e.next=3,E.moveCurrentPlayer(Q,Object(g.a)(Object(g.a)({},t),{},{playerId:x.playerId})).then((function(){var e=Object(N.a)(S);e[t.x][t.y].playerId=x.playerId,void 0!==x.x&&void 0!==x.y&&(e[x.x][x.y].playerId=void 0),I(e);var n=Object(N.a)(d);n[O].x=t.x,n[O].y=t.y,j(n),w(Object(g.a)(Object(g.a)({},x),{},{x:t.x,y:t.y}))})).catch((function(){console.error("Error while moving player")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,O,Q,d,S]),Y=Object(a.useCallback)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.switchPlayer(Q).then((function(){var e=(O+1)%h;console.log("old player index",O,"new player index",e),w(d[e]),m(e)})).catch((function(){return console.error("Error while switching player")}));case 2:case"end":return e.stop()}}),e)}))),[O,Q,h,d]),H=Object(a.useMemo)((function(){return{spaceDtos:S,playerDtos:d,currentPlayerDto:x,currentPlayerIndex:O,width:A,height:F,boardName:q,boardId:Q}}),[x,O,Q,q,F,d,S,A]);return Object(p.jsxs)(u.Provider,{value:{loaded:c,board:H,setCurrentPlayerOnSpace:X,switchCurrentPlayer:Y},children:[t," "]})},M=n(15),L=n.n(M);var R=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("header",{className:"App-header"}),Object(p.jsx)(A,{children:Object(p.jsxs)("div",{className:L.a.container,children:[Object(p.jsx)(C,{}),Object(p.jsx)("div",{className:L.a.game,children:Object(p.jsx)(_,{})}),Object(p.jsx)(f,{})]})})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(R,{})}),document.getElementById("root")),F()},7:function(e,t,n){e.exports={menu:"MenuComponent_menu__30J9I","menu-content":"MenuComponent_menu-content__1cFUQ","button-row":"MenuComponent_button-row__3my60",btn:"MenuComponent_btn__1aovQ","nav-link-row":"MenuComponent_nav-link-row__2Fgxj",active:"MenuComponent_active__2ONR3"}}},[[53,1,2]]]);
//# sourceMappingURL=main.e9cf5bed.chunk.js.map